{% extends 'layout.html.twig' %}
{% block body %}
    <div class="container d-flex flex-column justify-content-center">
        <div class="card col-6 offset-3">
            <h1 class="card-title text-center">{{serie.title}}</h1>
            <img src="{{serie.poster}}" class="card-img-top w-25" alt="{{ serie.title }} poster">
            <div class="card-body">
                <p>Season : {{ season.number }}</p>
                <p>Year : {{ season.year }}</p>
                <img src="{{episode.poster}}" class="card-img-top w-25" alt="{{ episode.title }} poster">
                <h3>Episode {{ episode.number }} - {{ episode.title}}</h3>
                <h4>Description : </h4>
                <p>{{ episode.synopsis }}</p>
            </div>
        </div>
    </div>

    {% if app.user and is_granted("ROLE_ADMIN")%}
        {% for comment in episode.comments | reverse %}
            Commentaire : {{ comment.comment }}</br>
            Note : {{ comment.rate }}</br>
            commentaire de : {{ comment.author.username }}</br>
        {% if app.user and app.user.email == comment.author.username or is_granted('ROLE_ADMIN') %}
            {% include "serie/_delete_form.html.twig" %}
        {% endif %}
        {% endfor %}
        {% if app.user %}
            {{ form_start(form) }}
                {{ form_widget(form) }}
                <input type='submit' value='Ajouter un commentaire'>
                {{ form_end(form) }}
            {% else %}
        {% endif %}
    {% endif %}

{% endblock %}
