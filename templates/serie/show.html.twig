{% extends 'layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('series') }}
{% endblock %}

{% block title %}{{ serie.title }}{% endblock %}

{% block body %}
        <h1>{{ serie.title }}</h1>
        <div class="showSeries">
            {% if ('https://' in serie.poster) or ('http://' in serie.poster) %}
                <img src="{{ serie.poster }}" alt="{{ serie.title }} poster">
            {% else %}
                <img src="/uploads/series/poster/{{ serie.poster }}" alt="{{ serie.title }} poster">
            {% endif %}
            <div class="seriesInformations mt-2 mx-3">
                <p>Title :
                    <a class="seriesTitle" href="{{ path("serie_show", { slug: serie.slug }) }}">{{ serie.title }}</a>
                    {% if app.user %}
                        <a id="watchlist" href="{{ path('serie_watchlist', { id: serie.id }) }}">
                            <i class="ms-3 bi {{ app.user.isInWatchlist(serie) ? 'bi-heart-fill' : 'bi-heart' }}"></i>
                        </a>
                    {% endif %}
                </p>
                <p>Date : {{ serie.year }}</p>
                <p>Category : 
                    <a class="categoryName" href="{{ path("category_show", { categoryName: serie.category.name }) }}">{{ serie.category.name }}</a>
                </p>
                <p>Country : {{ serie.country }}</p>
                
                <div class="d-flex">
                    <p>Actor : </p>
                    {% for actor in seasons[0].actors|slice(0, 4) %}
                        <a class="ms-2" href="{{ path('actor_show', {id: actor.id}) }}">{{ actor.name }}</a>
                    {% else %}
                        <div>Aucun acteur pour cette s√©rie</div>
                    {% endfor %}
                </div>
                <div class="d-flex">
                    <div class="dropdown-toggle col-1" role="button" data-bs-toggle="dropdown">
                        Seasons : {{ seasons|length }} seasons
                    </div>
                    <div class="dropdown-menu ms-5 ms-5" aria-labelledby="navbarDropdownMenuLink">
                        {% for season in seasons %}
                            <a class="dropdown-item" href="{{ path('serie_season_show', {slug: serie.slug, seasonId: season.id}) }}">Season
                                {{ season.number }}
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    <div>
        <p class="mb-5 mt-4">{{ serie.description }}</p>
        <div class="d-flex justify-content-center">
            {% if ('https://' in serie.image) or ('http://' in serie.image) %}
                <img class="w-75" src="{{serie.image}}" alt="{{ serie.title }} poster">
            {% else %}
                <img src="/uploads/series/images/{{serie.image}}" alt="{{ serie.title }} poster">
            {% endif %}
        </div>
    </div>
    {% if is_granted("ROLE_ADMIN") %}
        <a href="{{ path('serie_edit', { 'slug': serie.slug} ) }}">Edit</a>
    {% endif %}
    <div>
        <a href="{{ path('serie_index') }}">
            Back to series list
        </a>
    </div>
{% endblock %}
