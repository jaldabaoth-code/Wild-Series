{% extends 'layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('series') }}
{% endblock %}

{% block title %}All Series{% endblock %}

{% block body %}
    <div class="d-flex flex-column align-items-center">
        <h2 class="col text-center">
            {% if search == '' %}
                All Series
            {% else %}
                Result for : {{ search }}
            {% endif %}
        </h2>
        <div class="d-flex row">
            {% for serie in series %}
                <div class="col-3 my-3 d-flex flex-column align-items-center">
                    <a class="shine" href="{{ path("serie_show", { slug: serie.slug }) }}">
                        <img src="{{ serie.poster }}" alt="poster of series">
                    </a>
                    <div class="mt-2 mb-1 col-12 d-flex justify-content-center">
                        <!-- Edit series button -->
                        <a href="{{ path("serie_edit", { slug: serie.slug }) }}" type="button" class="btn btn-primary btn-sm col-4 me-1">Edit</a>
                        <!-- Delete series button -->
                        <form class="col-4 ms-1" method="post" action="{{ path('serie_delete', {'id': serie.id}) }}" onsubmit="return confirm('Are you sure you want to delete the series : {{ serie.title }} ?');">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ serie.id) }}">
                            <button class="btn btn-danger btn-sm col-12">Delete</button>
                        </form>
                    </div>
                    <a class="serieTitle mt-0" href="{{ path("serie_show", { slug: serie.slug }) }}">{{ serie.title }}</a>
                    {% if serie.category.name is defined %}
                        <a class="categoryName" href="{{ path("category_show", { categoryName: serie.category.name }) }}">{{ serie.category.name }}</a>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
